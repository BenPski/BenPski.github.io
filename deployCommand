# Temporarily store uncommited changes
echo stach
git stash

# Verify correct branch
echo develop
git checkout develop

# Build new files
echo build
stack exec website clean
stack exec website build

# Get previous files
echo fetch
git fetch --all
git checkout master

# Overwrite existing files with new files
echo copy
cp -a _site/. .

# Commit
echo commit
git add -A
git commit -m "Publish."

# Push
echo push
git push

# Restoration
echo restoration
git checkout develop
git branch -D master
git stash pop
